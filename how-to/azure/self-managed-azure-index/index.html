
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Developer preview documentation for HyperShift on Azure">
      
      
        <meta name="author" content="HyperShift Community">
      
      
        <link rel="canonical" href="https://hypershift-community.github.io/azure-dev-preview/how-to/azure/self-managed-azure-index/">
      
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.8">
    
    
      
        <title>Self-Managed Azure HyperShift Overview - HyperShift Azure Developer Preview</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../custom.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="HyperShift Azure Developer Preview" class="md-header__button md-logo" aria-label="HyperShift Azure Developer Preview" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HyperShift Azure Developer Preview
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Self-Managed Azure HyperShift Overview
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/hypershift-community/azure-dev-preview" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    hypershift-community/azure-dev-preview
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../self-managed/01-understanding/" class="md-tabs__link">
        
  
    
  
  Understanding

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../self-managed/02a-azure-planning/" class="md-tabs__link">
          
  
    
  
  Planning

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../self-managed/03-azure-foundation/" class="md-tabs__link">
        
  
    
  
  Azure Setup

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../self-managed/04-management-cluster/" class="md-tabs__link">
          
  
    
  
  Management & Hosted Clusters

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../self-managed/07-troubleshooting/" class="md-tabs__link">
          
  
    
  
  Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="HyperShift Azure Developer Preview" class="md-nav__button md-logo" aria-label="HyperShift Azure Developer Preview" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    HyperShift Azure Developer Preview
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hypershift-community/azure-dev-preview" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    hypershift-community/azure-dev-preview
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../self-managed/01-understanding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Understanding
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Planning
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Planning
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../self-managed/02a-azure-planning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Planning
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../self-managed/02b-workflow-planning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Workflow & Setup
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../self-managed/03-azure-foundation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Setup
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Management & Hosted Clusters
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Management & Hosted Clusters
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../self-managed/04-management-cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Management Cluster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../self-managed/05-hosted-cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create Hosted Cluster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../self-managed/06-day2-operations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Day 2 Operations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../self-managed/07-troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../self-managed/08-reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-differences-from-managed-azure" class="md-nav__link">
    <span class="md-ellipsis">
      Key Differences from Managed Azure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dns-management-options" class="md-nav__link">
    <span class="md-ellipsis">
      DNS Management Options
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment Workflow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deployment Workflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#phase-1-azure-workload-identity-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 1: Azure Workload Identity Setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-2-management-cluster-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 2: Management Cluster Setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-3-create-hosted-clusters" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 3: Create Hosted Clusters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites-summary" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites Summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resource-group-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Resource Group Strategy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Security Considerations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Next Steps
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Resources
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="self-managed-azure-hypershift-overview">Self-Managed Azure HyperShift Overview</h1>
<div class="admonition note">
<p class="admonition-title">Developer Preview in OCP 4.21</p>
<p>Self-managed Azure HostedClusters are available as a Developer Preview feature in OpenShift Container Platform 4.21.</p>
</div>
<h2 id="introduction">Introduction</h2>
<p>Self-managed Azure HyperShift enables you to deploy and manage OpenShift hosted control planes on an OpenShift management cluster running in Azure. The key difference from managed Azure HyperShift deployments is the management cluster platform: self-managed uses an OpenShift cluster you provision and manage, while managed Azure uses Azure Kubernetes Service (AKS).</p>
<h2 id="architecture-overview">Architecture Overview</h2>
<p>Self-managed Azure HyperShift deployments consist of three key layers:</p>
<ol>
<li><strong>Management Cluster</strong>: An existing Azure OpenShift cluster that hosts the HyperShift operator and control planes for your hosted clusters</li>
<li><strong>Control Plane</strong>: Kubernetes control plane components running as pods on the management cluster</li>
<li><strong>Data Plane</strong>: Worker nodes running as Azure Virtual Machines in your Azure subscription</li>
</ol>
<p>The architecture uses <a href="https://azure.github.io/azure-workload-identity/docs/">Azure Workload Identity</a> for secure, credential-free authentication between OpenShift components and Azure services. This eliminates the need to manage long-lived service principal credentials and provides better security through federated identity credentials.</p>
<h3 id="key-differences-from-managed-azure">Key Differences from Managed Azure</h3>
<p>Unlike managed Azure HyperShift deployments, self-managed Azure:</p>
<ul>
<li>Uses an OpenShift cluster as the management platform instead of AKS</li>
<li>Requires you to provision and manage the lifecycle of the management cluster</li>
</ul>
<h2 id="dns-management-options">DNS Management Options</h2>
<p>Self-managed Azure HyperShift supports two DNS management approaches, and both are documented in the same guides:</p>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>With External DNS</th>
<th>Without External DNS</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Best For</strong></td>
<td>Production, multi-cluster</td>
<td>Development, testing</td>
</tr>
<tr>
<td><strong>API Server DNS</strong></td>
<td>Custom (e.g., <code>api-cluster.example.com</code>)</td>
<td>Azure LoadBalancer (e.g., <code>abc123.region.cloudapp.azure.com</code>)</td>
</tr>
<tr>
<td><strong>Setup Complexity</strong></td>
<td>Higher (requires DNS zones, service principal)</td>
<td>Lower (minimal configuration)</td>
</tr>
<tr>
<td><strong>Management</strong></td>
<td>Fully automatic</td>
<td>Manual or Azure-provided</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Both Approaches in One Guide</p>
<p>Our setup guides include instructions for both approaches. Simply follow the sections that match your choice:</p>
<ul>
<li><strong>With External DNS</strong>: Follow all sections including DNS Zone Configuration and External DNS Service Principal Setup</li>
<li><strong>Without External DNS</strong>: Skip DNS sections and use the simplified operator installation command</li>
</ul>
</div>
<h2 id="deployment-workflow">Deployment Workflow</h2>
<p>Setting up self-managed Azure HyperShift is a three-phase process that must be completed in order:</p>
<h3 id="phase-1-azure-workload-identity-setup">Phase 1: Azure Workload Identity Setup</h3>
<p><strong>Purpose</strong>: Establish secure authentication infrastructure for OpenShift components to access Azure services.</p>
<p>This phase creates the foundational security infrastructure required for your hosted clusters:</p>
<ul>
<li><strong>Managed Identities</strong>: Creates Azure managed identities for each OpenShift component (image registry, ingress, CSI drivers, cloud provider, network operator, etc.)</li>
<li><strong>OIDC Issuer</strong>: Configures an OIDC issuer in Azure Blob Storage for service account token validation</li>
<li><strong>Federated Credentials</strong>: Establishes trust relationships between Azure Entra ID and OpenShift service accounts</li>
</ul>
<p><strong>Why This Matters</strong>: Without these identities and federated credentials, your hosted cluster components cannot authenticate with Azure APIs to provision storage, manage load balancers, configure networking, or perform other essential cloud operations. Using workload identities instead of traditional service principals provides better security, automatic credential rotation, and follows Azure's modern authentication best practices.</p>
<p><strong>When to Complete</strong>: This is a one-time setup that can be reused across multiple hosted clusters. Complete this before proceeding to Phase 2.</p>
<p>ðŸ‘‰ <strong>Guide</strong>: <a href="../azure-workload-identity-setup/">Azure Workload Identity Setup</a></p>
<h3 id="phase-2-management-cluster-setup">Phase 2: Management Cluster Setup</h3>
<p><strong>Purpose</strong>: Prepare your Azure OpenShift management cluster to host and manage HyperShift control planes.</p>
<p>This phase installs the HyperShift operator with optional External DNS configuration:</p>
<ul>
<li><strong>DNS Zone Configuration</strong> (Optional): Creates Azure DNS zones for automatic DNS record management</li>
<li><strong>External DNS</strong> (Optional): Sets up a service principal and deploys ExternalDNS operator</li>
<li><strong>HyperShift Operator</strong>: Installs the HyperShift operator</li>
</ul>
<p><strong>Why This Matters</strong>: The HyperShift operator orchestrates the entire lifecycle of hosted control planes. If you choose External DNS, it automatically provisions DNS records for each hosted cluster's endpoints.</p>
<p><strong>When to Complete</strong>: After Phase 1 is complete, but before creating any hosted clusters.</p>
<p>ðŸ‘‰ <strong>Guide</strong>: <a href="../setup-management-cluster/">Setup Azure Management Cluster for HyperShift</a> - Includes both DNS approaches</p>
<h3 id="phase-3-create-hosted-clusters">Phase 3: Create Hosted Clusters</h3>
<p><strong>Purpose</strong>: Deploy self-managed Azure hosted clusters with custom networking and configuration.</p>
<p>This phase creates your actual hosted OpenShift clusters:</p>
<ul>
<li><strong>Infrastructure Provisioning</strong>: Creates resource groups, VNets, subnets, and network security groups</li>
<li><strong>HostedCluster Creation</strong>: Deploys the control plane on the management cluster and worker nodes in your Azure subscription</li>
<li><strong>Workload Identity Integration</strong>: Links the hosted cluster to the workload identities created in Phase 1</li>
</ul>
<p><strong>Why This Matters</strong>: This is where you deploy the actual OpenShift clusters that your applications will run on. Each hosted cluster gets its own control plane running on the management cluster and its own set of worker node VMs in Azure. The cluster uses the workload identities from Phase 1 to securely access Azure services without storing credentials.</p>
<p><strong>When to Complete</strong>: After Phases 1 and 2 are fully configured and verified.</p>
<p>ðŸ‘‰ <strong>Guide</strong>: <a href="../create-self-managed-azure-cluster/">Create a Self-Managed Azure HostedCluster</a> - Includes both DNS approaches</p>
<h2 id="prerequisites-summary">Prerequisites Summary</h2>
<p>Before beginning the deployment process, ensure you have:</p>
<ul>
<li>
<p><strong>Azure Resources</strong>:</p>
<ul>
<li>An existing Azure OpenShift management cluster</li>
<li>Azure subscription with appropriate permissions (Contributor + User Access Administrator)</li>
<li>(Optional) A parent DNS zone in Azure DNS for delegating cluster DNS records (required only if using External DNS)</li>
</ul>
</li>
<li>
<p><strong>Tools and Access</strong>:</p>
<ul>
<li>Azure CLI (<code>az</code>) configured with your subscription</li>
<li>OpenShift CLI (<code>oc</code>) or Kubernetes CLI (<code>kubectl</code>)</li>
<li>HyperShift CLI binary</li>
<li><code>jq</code> command-line JSON processor</li>
<li>Cloud Credential Operator (CCO) tool</li>
<li>Valid OpenShift pull secret</li>
</ul>
</li>
<li>
<p><strong>Permissions</strong>:</p>
<ul>
<li>Subscription-level Contributor and User Access Administrator roles</li>
<li>Microsoft Graph API permissions (Application.ReadWrite.OwnedBy) for creating service principals</li>
</ul>
</li>
</ul>
<h2 id="resource-group-strategy">Resource Group Strategy</h2>
<p>Self-managed Azure deployments use multiple resource groups with different lifecycles:</p>
<ul>
<li>
<p><strong>Persistent Resource Group</strong> (e.g., <code>os4-common</code>): Long-lived resources shared across multiple clusters</p>
<ul>
<li>Workload identities (managed identities)</li>
<li>OIDC issuer storage account</li>
<li>Azure DNS zones (if using External DNS)</li>
<li>External DNS service principal (if using External DNS)</li>
</ul>
</li>
<li>
<p><strong>Cluster-Specific Resource Groups</strong>: Created and destroyed with each hosted cluster</p>
<ul>
<li>Managed resource group for cluster infrastructure</li>
<li>VNet resource group (if using custom networking)</li>
<li>NSG resource group (if using custom networking)</li>
</ul>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Resource Reuse</p>
<p>By placing workload identities and OIDC issuer in a persistent resource group, you can:</p>
<ul>
<li>Reuse the same identities across multiple hosted clusters</li>
<li>Avoid recreating federated credentials for each cluster</li>
<li>Reduce cluster creation time</li>
<li>Simplify cleanup when deleting individual clusters</li>
</ul>
</div>
<h2 id="security-considerations">Security Considerations</h2>
<p>Self-managed Azure HyperShift implements several security best practices:</p>
<ol>
<li><strong>Workload Identity Federation</strong>: Eliminates long-lived credentials by using OIDC-based authentication</li>
<li><strong>Least Privilege Access</strong>: Each component gets its own managed identity with minimal required permissions</li>
<li><strong>Network Isolation</strong>: Custom VNets and NSGs allow you to implement network segmentation and security policies</li>
<li><strong>Federated Credentials</strong>: Trust relationships are scoped to specific service accounts, preventing unauthorized access</li>
</ol>
<h2 id="next-steps">Next Steps</h2>
<p>Begin your self-managed Azure HyperShift deployment by following the guides in order:</p>
<ol>
<li><strong><a href="../azure-workload-identity-setup/">Azure Workload Identity Setup</a></strong> - Set up managed identities and OIDC federation</li>
<li><strong><a href="../setup-management-cluster/">Setup Azure Management Cluster for HyperShift</a></strong> - Install HyperShift operator (with or without External DNS)</li>
<li><strong><a href="../create-self-managed-azure-cluster/">Create a Self-Managed Azure HostedCluster</a></strong> - Deploy your first hosted cluster</li>
</ol>
<p>Each guide includes sections for both DNS approaches - simply follow the sections that match your choice.</p>
<h2 id="additional-resources">Additional Resources</h2>
<ul>
<li><a href="https://azure.github.io/azure-workload-identity/docs/">Azure Workload Identity Documentation</a></li>
<li><a href="../../../reference/architecture/">HyperShift Architecture Reference</a></li>
<li><a href="../create-azure-cluster-on-aks/">Managed Azure Documentation</a> - For comparison with AKS-based deployments</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.indexes", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>